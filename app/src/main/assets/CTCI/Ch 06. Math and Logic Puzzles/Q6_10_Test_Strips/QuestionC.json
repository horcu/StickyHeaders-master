{"Id":"b9fc006a-a677-416a-9f70-aed850461095","Topic":"Ch 06. Math and Logic Puzzles","Question":"","Solution":"package Q6_10_Test_Strips;\n\nimport java.util.ArrayList;\nimport java.util.Random;\n\npublic class QuestionC {\n\tpublic static ArrayList<Bottle> createBottles(int nBottles, int poisoned) {\n\t\tArrayList<Bottle> bottles = new ArrayList<Bottle>();\n\t\tfor (int i = 0; i < nBottles; i++) {\n\t\t\tbottles.add(new Bottle(i));\n\t\t}\n\t\t\n\t\tif (poisoned == -1) {\n\t\t\tRandom random = new Random();\n\t\t\tpoisoned = random.nextInt(nBottles);\n\t\t}\n\t\tbottles.get(poisoned).setAsPoisoned();\n\t\t\n\t\tSystem.out.println(\"Added poison to bottle \" + poisoned);\n\t\t\n\t\treturn bottles;\n\t}\n\t\n\tpublic static int findPoisonedBottle(ArrayList<Bottle> bottles, ArrayList<TestStrip> strips) {\n\t\trunTests(bottles, strips);\n\t\tArrayList<Integer> positive = getPositiveOnDay(strips, 7);\n\t\treturn setBits(positive);\n\t}\t\n\t\n\t/* Add bottles to test strips */\n\tpublic static void runTests(ArrayList<Bottle> bottles, ArrayList<TestStrip> testStrips) {\n\t\tfor (Bottle bottle : bottles) {\n\t\t\tint id = bottle.getId();\n\t\t\tint bitIndex = 0;\n\t\t\twhile (id > 0) {\n\t\t\t\tif ((id & 1) == 1) {\n\t\t\t\t\ttestStrips.get(bitIndex).addDropOnDay(0, bottle);\n\t\t\t\t}\n\t\t\t\tbitIndex++;\n\t\t\t\tid >>= 1;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/* Get test strips that are positive on a particular day. */\n\tpublic static ArrayList<Integer> getPositiveOnDay(ArrayList<TestStrip> testStrips, int day) {\n\t\tArrayList<Integer> positive = new ArrayList<Integer>();\n\t\tfor (TestStrip testStrip : testStrips) {\n\t\t\tint id = testStrip.getId();\n\t\t\tif (testStrip.isPositiveOnDay(day)) {\n\t\t\t\tpositive.add(id);\n\t\t\t}\n\t\t}\n\t\treturn positive;\n\t}\n\t\n\t/* Create number by setting bits with indices specified in positive. */\n\tpublic static int setBits(ArrayList<Integer> positive) {\n\t\tint id = 0;\n\t\tfor (Integer bitIndex : positive) {\n\t\t\tid |= 1 << bitIndex;\n\t\t}\n\t\treturn id;\n\t}\n\t\n\tpublic static ArrayList<TestStrip> createTestStrips(int nTestStrips) {\n\t\tArrayList<TestStrip> testStrips = new ArrayList<TestStrip>();\n\t\tfor (int i = 0; i < nTestStrips; i++) {\n\t\t\ttestStrips.add(new TestStrip(i));\n\t\t}\n\t\treturn testStrips;\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\tint nBottles = 1000;\n\t\tint nTestStrips = 10;\n\t\tfor (int poisoned = 0; poisoned < nBottles; poisoned++) {\n\t\t\tArrayList<Bottle> bottles = createBottles(nBottles, poisoned);\n\t\t\tArrayList<TestStrip> testStrips = createTestStrips(nTestStrips);\n\t\t\tint poisonedId = findPoisonedBottle(bottles, testStrips);\n\t\t\tSystem.out.println(\"Suspected Bottle: \" + poisonedId);\n\t\t\tif (poisonedId != poisoned) {\n\t\t\t\tSystem.out.println(\"ERROR\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n","Chapter":"Ch 06. Math and Logic Puzzles"}