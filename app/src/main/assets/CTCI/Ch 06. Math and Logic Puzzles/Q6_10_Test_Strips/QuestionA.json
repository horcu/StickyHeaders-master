{"Id":"cbf66518-dcb2-4c34-bdfe-6cfa03afd4df","Topic":"Ch 06. Math and Logic Puzzles","Question":"","Solution":"package Q6_10_Test_Strips;\n\nimport java.util.ArrayList;\nimport java.util.Random;\n\npublic class QuestionA {\n\tpublic static int findPoisonedBottle(ArrayList<Bottle> bottles, ArrayList<TestStrip> strips) {\n\t\tint today = 0;\n\t\t\n\t\twhile (bottles.size() > 1 && strips.size() > 0) {\n\t\t\t/* Run tests. */\n\t\t\trunTestSet(bottles, strips, today);\n\t\t\t\n\t\t\t/* Wait for results. */\n\t\t\ttoday += TestStrip.DAYS_FOR_RESULT;\n\t\t\t\n\t\t\t/* Check results. */\n\t\t\tfor (TestStrip strip : strips) {\n\t\t\t\tif (strip.isPositiveOnDay(today)) {\n\t\t\t\t\tbottles = strip.getLastWeeksBottles(today);\n\t\t\t\t\tstrips.remove(strip);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tif (bottles.size() == 1) {\n\t\t\tSystem.out.println(\"Suspected bottle is \" + bottles.get(0).getId() + \" on day \" + today);\n\t\t\treturn bottles.get(0).getId();\n\t\t}\n\t\treturn -1;\t\n\t}\t\n\t\n\tpublic static void runTestSet(ArrayList<Bottle> bottles, ArrayList<TestStrip> strips, int day) {\n\t\tint index = 0;\n\t\tfor (Bottle bottle : bottles) {\n\t\t\tTestStrip strip = strips.get(index);\n\t\t\tstrip.addDropOnDay(day, bottle);\n\t\t\tindex = (index + 1) % strips.size();\n\t\t}\n\t}\n\t\n\tpublic static ArrayList<Bottle> createBottles(int nBottles, int poisoned) {\n\t\tArrayList<Bottle> bottles = new ArrayList<Bottle>();\n\t\tfor (int i = 0; i < nBottles; i++) {\n\t\t\tbottles.add(new Bottle(i));\n\t\t}\n\t\t\n\t\tif (poisoned == -1) {\n\t\t\tRandom random = new Random();\n\t\t\tpoisoned = random.nextInt(nBottles);\n\t\t}\n\t\tbottles.get(poisoned).setAsPoisoned();\n\t\t\n\t\tSystem.out.println(\"Added poison to bottle \" + poisoned);\n\t\t\n\t\treturn bottles;\n\t}\n\t\n\tpublic static ArrayList<TestStrip> createTestStrips(int nTestStrips) {\n\t\tArrayList<TestStrip> testStrips = new ArrayList<TestStrip>();\n\t\tfor (int i = 0; i < nTestStrips; i++) {\n\t\t\ttestStrips.add(new TestStrip(i));\n\t\t}\n\t\treturn testStrips;\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\tint nBottles = 1000;\n\t\tint nTestStrips = 10;\n\t\tfor (int poisoned = 0; poisoned < nBottles; poisoned++) {\n\t\t\tArrayList<Bottle> bottles = createBottles(nBottles, poisoned);\n\t\t\tArrayList<TestStrip> testStrips = createTestStrips(nTestStrips);\n\t\t\tint poisonedId = findPoisonedBottle(bottles, testStrips);\n\t\t\tSystem.out.println(\"Suspected Bottle: \" + poisonedId);\n\t\t\tif (poisonedId != poisoned) {\n\t\t\t\tSystem.out.println(\"ERROR\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n","Chapter":"Ch 06. Math and Logic Puzzles"}