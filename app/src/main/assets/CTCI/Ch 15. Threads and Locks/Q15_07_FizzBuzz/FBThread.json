{"Id":"b46712e9-1555-4f95-91a5-d145865cc8ea","Topic":"Ch 15. Threads and Locks","Question":"","Solution":"package Q15_07_FizzBuzz;\n\nimport java.util.function.Function;\nimport java.util.function.Predicate;\n\npublic class FBThread extends Thread {\n\tprivate static Object lock = new Object();\n\tprotected static int current = 1;\n\tprivate int max;\n\tprivate Predicate<Integer> validate;\n\tprivate Function<Integer, String> printer;\n\tint x = 1;\n\t\n\tpublic FBThread(Predicate<Integer> validate, Function<Integer, String> printer, int max) {\n\t\tthis.validate = validate;\n\t\tthis.printer = printer;\n\t\tthis.max = max;\n\t}\n\t\n\tpublic void run() {\n\t\twhile (true) {\n\t\t\tsynchronized (lock) {\n\t\t\t\tif (current > max) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (validate.test(current)) {\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tSystem.out.println(printer.apply(current));\n\t\t\t\t\tcurrent++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","Chapter":"Ch 15. Threads and Locks"}