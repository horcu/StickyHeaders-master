{"Id":"f5944b65-56e1-4bb4-8b8b-8fd996486304","Topic":"Ch 15. Threads and Locks","Question":"","Solution":"package IntroductionLocks;\r\n\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class LockedATM {\r\n\tprivate Lock lock;\r\n\tprivate int balance = 100;\r\n\t\r\n\tpublic LockedATM() {\r\n\t\tlock = new ReentrantLock();\r\n\t}\r\n\t\r\n\tpublic int withdraw(int value) {\r\n\t\tlock.lock();\r\n\t\tint temp = balance;\r\n\t\ttry {\r\n\t\t\tThread.sleep(100);\r\n\t\t\ttemp = temp - value;\r\n\t\t\tThread.sleep(100);\r\n\t\t\tbalance = temp;\r\n\t\t} catch (InterruptedException e) {\t\t}\r\n\t\tlock.unlock();\r\n\t\treturn temp;\r\n\t}\r\n\t\r\n\tpublic int deposit(int value) {\r\n\t\tlock.lock();\r\n\t\tint temp = balance;\r\n\t\ttry {\r\n\t\t\tThread.sleep(100);\r\n\t\t\ttemp = temp + value;\r\n\t\t\tThread.sleep(100);\r\n\t\t\tbalance = temp;\r\n\t\t} catch (InterruptedException e) {\t\t}\r\n\t\tlock.unlock();\r\n\t\treturn temp;\r\n\t} \r\n\t\r\n\tpublic int getBalance() {\r\n\t\treturn balance;\r\n\t}\r\n}\r\n","Chapter":"Ch 15. Threads and Locks"}