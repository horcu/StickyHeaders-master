{"Id":"adea23cb-328e-45b8-84cc-0419e796a9b5","Topic":"Ch 04. Trees and Graphs","Question":"","Solution":"package Q4_08_First_Common_Ancestor;\r\n\r\nimport CtCILibrary.TreeNode;\r\n\r\npublic class QuestionE {\r\n\tpublic static class Result {\r\n\t\tpublic TreeNode node;\r\n\t\tpublic boolean isAncestor;\r\n\t\tpublic Result(TreeNode n, boolean isAnc) {\r\n\t\t\tnode = n;\r\n\t\t\tisAncestor = isAnc;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static Result commonAncestorHelper(TreeNode root, TreeNode p, TreeNode q) {\r\n\t\tif (root == null) {\r\n\t\t\treturn new Result(null, false);\r\n\t\t}\r\n\t\tif (root == p && root == q) {\r\n\t\t\treturn new Result(root, true);\r\n\t\t}\r\n\t\t\r\n\t\tResult rx = commonAncestorHelper(root.left, p, q);\r\n\t\tif (rx.isAncestor) { // Found common ancestor\r\n\t\t\treturn rx;\r\n\t\t}\r\n\t\t\r\n\t\tResult ry = commonAncestorHelper(root.right, p, q);\r\n\t\tif (ry.isAncestor) { // Found common ancestor\r\n\t\t\treturn ry;\r\n\t\t}\r\n\t\t\r\n\t\tif (rx.node != null && ry.node != null) {\r\n\t\t\treturn new Result(root, true); // This is the common ancestor\r\n\t\t} else if (root == p || root == q) {\r\n\t\t\t/* If weï¿½re currently at p or q, and we also found one of those\r\n\t\t\t * nodes in a subtree, then this is truly an ancestor and the\r\n\t\t\t * flag should be true. */\r\n\t\t\tboolean isAncestor = rx.node != null || ry.node != null;\r\n\t\t\treturn new Result(root, isAncestor);\r\n\t\t} else {\r\n\t\t\treturn new Result(rx.node != null ? rx.node : ry.node, false);\r\n\t\t}\r\n\t}\t\r\n\t\r\n\tpublic static TreeNode commonAncestor(TreeNode root, TreeNode p, TreeNode q) {\r\n\t\tResult r = commonAncestorHelper(root, p, q);\r\n\t\tif (r.isAncestor) {\r\n\t\t\treturn r.node;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\t\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] array = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\r\n\t\tTreeNode root = TreeNode.createMinimalBST(array);\r\n\t\tTreeNode n3 = root.find(10);\r\n\t\tTreeNode n7 = root.find(6);\r\n\t\tTreeNode ancestor = commonAncestor(root, n3, n7);\r\n\t\tif (ancestor != null) {\r\n\t\t\tSystem.out.println(ancestor.data);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(\"null\");\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","Chapter":"Ch 04. Trees and Graphs"}