{"Id":"55a8582e-944a-4422-b8cf-1c949e0d958d","Topic":"Ch 05. Bit Manipulation","Question":"","Solution":"package Q5_03_Flip_Bit_to_Win;\n\npublic class QuestionC {\n\n\tpublic static int SEQUENCE_LENGTH = 32;\n\t\n\t/* Given set of three sequences ordered as {0s, then 1s, then 0s}, \n\t * find max sequence that can be formed. */\n\tpublic static int getMaxSequence(int[] sequences) { /* 1s, then 0s, then [old] ones */\n\t\tif (sequences[1] == 1) { // a single 0 -> merge sequences\n\t\t\treturn sequences[0] + sequences[2] + 1; \n\t\t} else if (sequences[1] == 0) { // no 0s -> take one side\n\t\t\treturn Math.max(sequences[0], sequences[2]); \n\t\t} else {  // many 0s -> take side, add 1 (flip a bit)\n\t\t\treturn Math.max(sequences[0], sequences[2]) + 1;\n\t\t}\n\t}\n\t\n\tpublic static void shift(int[] sequences) {\n\t\tsequences[2] = sequences[1];\n\t\tsequences[1] = sequences[0];\n\t\tsequences[0] = 0;\n\t}\n\t\n\tpublic static int longestSequence(int n) {\n\t\tint searchingFor = 0;\n\t\tint[] sequences = {0, 0, 0}; // Counts of last 3 sequences\n\t\tint maxSequence = 1;\n\t\t\n\t\tfor (int i = 0; i < SEQUENCE_LENGTH; i++) {\n\t\t\tif ((n & 1) != searchingFor) {\n\t\t\t\tif (searchingFor == 1) { // End of 1s + 0s + 1s sequence\n\t\t\t\t\tmaxSequence = Math.max(maxSequence, getMaxSequence(sequences));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsearchingFor = n & 1; // Flip 1 to 0 or 0 to 1\n\t\t\t\tshift(sequences); // Shift sequences\n\t\t\t}\n\t\t\tsequences[0]++;\n\t\t\tn >>>= 1;\n\t\t}\n\t\t\n\t\t/* Check final set of sequences */\n\t\tif (searchingFor == 0) {\n\t\t\tshift(sequences);\t\t\n\t\t}\n\t\tint finalSequence = getMaxSequence(sequences);\n\t\tmaxSequence = Math.max(finalSequence, maxSequence);\t\t\n\t\t\n\t\treturn maxSequence;\n\t}\t\t\n\t\n\tpublic static void main(String[] args) {\n\t\tint original_number = Integer.MAX_VALUE;\n\t\tint new_number = longestSequence(original_number);\n\t\t\t\n\t\tSystem.out.println(Integer.toBinaryString(original_number));\n\t\tSystem.out.println(new_number);\t\t\n\t}\n\n}\n","Chapter":"Ch 05. Bit Manipulation"}