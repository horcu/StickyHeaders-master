{"Id":"6c0615a3-58f3-48cf-9f41-49da06efb5e1","Topic":"Ch 07. Object-Oriented Design","Question":"","Solution":"package Q7_09_Circular_Array;\r\n\r\nimport java.util.Iterator;\r\n\r\npublic class CircularArray<T> implements Iterable<T> {\r\n\tprivate T[] items;\r\n\tprivate int head = 0;\r\n\t\r\n\tpublic CircularArray(int size) {\r\n\t\titems = (T[]) new Object[size];\r\n\t}\r\n\t\r\n\tprivate int convert(int index) {\r\n\t\tif (index < 0) {\r\n\t\t\tindex += items.length;\r\n\t\t}\r\n\t\treturn (head + index) % items.length;\r\n\t}\r\n\t\r\n\tpublic void rotate(int shiftRight) {\r\n\t\thead = convert(shiftRight);\r\n\t}\r\n\t\r\n\tpublic T get(int i) {\r\n\t\tif (i < 0 || i >= items.length) {\r\n\t\t\tthrow new java.lang.IndexOutOfBoundsException(\"Index \" + i + \" is out of bounds\");\r\n\t\t}\r\n\t\treturn items[convert(i)];\r\n\t}\r\n\t\r\n\tpublic void set(int i, T item) {\r\n\t\titems[convert(i)] = item;\r\n\t}\r\n\t\r\n\tpublic Iterator<T> iterator() {\r\n\t\treturn new CircularArrayIterator();\r\n\t}\r\n\t\r\n\tprivate class CircularArrayIterator implements Iterator<T> {\r\n\t\tprivate int _current = -1;\r\n\t\t\r\n\t\tpublic CircularArrayIterator() { }\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic boolean hasNext() {\r\n\t\t\treturn _current < items.length - 1;\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic T next() {\r\n\t\t\t_current++;\r\n\t\t\treturn (T) items[convert(_current)];\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void remove() {\r\n\t\t\tthrow new UnsupportedOperationException(\"Remove is not supported by CircularArray\");\r\n\t\t}\r\n\t}\r\n}\r\n","Chapter":"Ch 07. Object-Oriented Design"}