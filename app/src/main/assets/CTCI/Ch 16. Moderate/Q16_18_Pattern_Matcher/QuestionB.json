{"Id":"a89cdd66-f876-416d-a893-ea24a6f2d71f","Topic":"Ch 16. Moderate","Question":"","Solution":"package Q16_18_Pattern_Matcher;\n\npublic class QuestionB {\n\t\n\tpublic static String formStringFromPattern(String pattern, String first, String second) {\n\t\tif (pattern.length() == 0) return null;\n\t\t\n\t\tStringBuffer sb = new StringBuffer();\n\t\tchar firstChar = pattern.charAt(0);\n\t\tfor (char c : pattern.toCharArray()) {\n\t\t\tif (c == firstChar) {\n\t\t\t\tsb.append(first);\n\t\t\t} else if (c != firstChar) {\n\t\t\t\tsb.append(second);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\treturn sb.toString();\n\t}\n\t\n\tpublic static int countOf(String pattern, char ch) {\n\t\tint count = 0;\n\t\tfor (char c : pattern.toCharArray()) {\n\t\t\tif (c == ch) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\t\n\tpublic static String canonical(String pattern) {\n\t\tif (pattern.charAt(0) == 'a') return pattern;\n\t\tStringBuffer sb = new StringBuffer();\n\t\tfor (char c : pattern.toCharArray()) {\n\t\t\tif (c == 'a') {\n\t\t\t\tsb.append('b');\n\t\t\t} else {\n\t\t\t\tsb.append('a');\n\t\t\t}\n\t\t}\n\t\treturn sb.toString();\n\t}\n\n\tpublic static boolean doesMatch(String pattern, String value) {\n\t\tif (pattern.length() == 0) return value.length() == 0;\n\t\t\n\t\tpattern = canonical(pattern);\n\n\t\tint countOfAs = countOf(pattern, 'a');\n\t\tint countOfBs = pattern.length() - countOfAs;\n\t\tint firstB = pattern.indexOf('b');\n\t\t\n\t\tfor (int aSize = 0; aSize <= value.length() / countOfAs; aSize++) {\n\t\t\tint remainingLength = value.length() - aSize * countOfAs;\n\t\t\tString first = value.substring(0, aSize);\n\t\t\tif (countOfBs == 0 || remainingLength % countOfBs == 0) {\n\t\t\t\tint bIndex = firstB * aSize;\n\t\t\t\tint bSize = countOfBs == 0 ? 0 : remainingLength / countOfBs;\n\t\t\t\tString second = countOfBs == 0 ? \"\" : value.substring(bIndex, bSize + bIndex);\n\t\t\t\t\n\t\t\t\tString candidate = formStringFromPattern(pattern, first, second);\n\t\t\t\t\n\t\t\t\tif (candidate.equals(value)) {\n\t\t\t\t\tSystem.out.println(first + \", \" + second);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\t\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\tString[][] tests = {{\"ababb\", \"backbatbackbatbat\"}, {\"abab\", \"backsbatbackbats\"}, {\"aba\", \"backsbatbacksbat\"}};\n\t\tfor (String[] test : tests) {\n\t\t\tString pattern = test[0];\n\t\t\tString value = test[1];\n\t\t\tSystem.out.println(pattern + \", \" + value + \": \" + doesMatch(pattern, value));\n\t\t}\n\n\t}\n\n}\n","Chapter":"Ch 16. Moderate"}