{"Id":"e9f2f156-5b96-4125-9764-86aa75cada1e","Topic":"Ch 17. Hard","Question":"","Solution":"package Q17_24_Max_Submatrix;\r\n\r\nimport CtCILibrary.*;\r\n\r\npublic class QuestionB {\r\n\tpublic static SubMatrix getMaxMatrix(int[][] matrix) {\r\n\t\tSubMatrix best = null;\r\n\t\tint rowCount = matrix.length;\r\n\t\tint columnCount = matrix[0].length;\r\n\t\tint[][] sumThrough = precomputeSums(matrix);\r\n\t\t\r\n\t\tfor (int row1 = 0; row1 < rowCount; row1++) {\r\n\t\t\tfor (int row2 = row1; row2 < rowCount; row2++) {\r\n\t\t\t\tfor (int col1 = 0; col1 < columnCount; col1++) {\r\n\t\t\t\t\tfor (int col2 = col1; col2 < columnCount; col2++) {\r\n\t\t\t\t\t\tint sum = sum(sumThrough, row1, col1, row2, col2);\r\n\t\t\t\t\t\tif (best == null || best.getSum() < sum) {\r\n\t\t\t\t\t\t\tbest = new SubMatrix(row1, col1, row2, col2, sum);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn best;\r\n\t}\r\n\t\t\r\n\tprivate static int[][] precomputeSums(int[][] matrix) {\r\n\t\tint[][] sumThrough = new int[matrix.length][matrix[0].length];\r\n\t\tfor (int r = 0; r < matrix.length; r++) {\r\n\t\t\tfor (int c = 0; c < matrix[0].length; c++) {\r\n\t\t\t\tint left = c > 0 ? sumThrough[r][c - 1] : 0;\r\n\t\t\t\tint top = r > 0 ? sumThrough[r - 1][c] : 0;\r\n\t\t\t\tint overlap = r > 0 && c > 0 ? sumThrough[r - 1][c - 1] : 0;\r\n\t\t\t\tsumThrough[r][c] = left + top - overlap + matrix[r][c];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sumThrough;\r\n\t}\r\n\t\r\n\tprivate static int sum(int[][] sumThrough, int r1, int c1, int r2, int c2) {\r\n\t\tint topAndLeft = r1 > 0 && c1 > 0 ? sumThrough[r1 - 1][c1 - 1] : 0;\r\n\t\tint left = c1 > 0 ? sumThrough[r2][c1 - 1] : 0;\r\n\t\tint top = r1 > 0 ? sumThrough[r1 - 1][c2] : 0;\r\n\t\tint full = sumThrough[r2][c2];\r\n\t\treturn full - left - top + topAndLeft;\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tint[][] matrix = AssortedMethods.randomMatrix(10, 10, -5, 5);\r\n\t\tAssortedMethods.printMatrix(matrix);\r\n\t\tSystem.out.println(getMaxMatrix(matrix));\r\n\t}\r\n\r\n}\r\n","Chapter":"Ch 17. Hard"}