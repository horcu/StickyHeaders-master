{"Id":"88b4647e-12a9-42f2-92f4-9ecba1be05ee","Topic":"Ch 17. Hard","Question":"","Solution":"package Q17_21_Volume_of_Histogram;\n\npublic class QuestionB {\n\tpublic static int borderedVolume(HistogramData[] data, int start, int end) {\n\t\tif (start >= end) return 0;\n\t\t\n\t\tint min = Math.min(data[start].getHeight(), data[end].getHeight());\n\t\tint sum = 0;\n\t\tfor (int i = start + 1; i < end; i++) {\n\t\t\tsum += min - data[i].getHeight();\n\t\t}\n\t\treturn sum;\n\t}\n\t\n\tpublic static int subgraphVolume(HistogramData[] histogram, int start, int end, boolean isLeft) {\n\t\tif (start >= end) return 0;\t\n\t\tint sum = 0;\n\t\tif (isLeft) {\n\t\t\tint max = histogram[end - 1].getLeftMaxIndex();\t\n\t\t\tsum += borderedVolume(histogram, max, end);\n\t\t\tsum += subgraphVolume(histogram, start, max, isLeft);\t\n\t\t} else {\n\t\t\tint max = histogram[start + 1].getRightMaxIndex();\t\n\t\t\tsum += borderedVolume(histogram, start, max);\n\t\t\tsum += subgraphVolume(histogram, max, end, isLeft);\t\t\n\t\t}\n\t\t\n\t\treturn sum;\n\t}\n\t\n\tpublic static HistogramData[] createHistogramData(int[] histo) {\n\t\tHistogramData[] histogram = new HistogramData[histo.length];\n\t\tfor (int i = 0; i < histo.length; i++) {\n\t\t\thistogram[i] = new HistogramData(histo[i]);\n\t\t}\n\t\t\n\t\t/* Set left max index. */\n\t\tint maxIndex = 0;\n\t\tfor (int i = 0; i < histo.length; i++) {\n\t\t\tif (histo[maxIndex] < histo[i]) {\n\t\t\t\tmaxIndex = i;\n\t\t\t}\n\t\t\thistogram[i].setLeftMaxIndex(maxIndex);\n\t\t}\n\t\t\n\t\t/* Set right max index. */\n\t\tmaxIndex = histogram.length - 1;\n\t\tfor (int i = histogram.length - 1; i >= 0; i--) {\n\t\t\tif (histo[maxIndex] < histo[i]) {\n\t\t\t\tmaxIndex = i;\n\t\t\t}\n\t\t\thistogram[i].setRightMaxIndex(maxIndex);\t\t\t\n\t\t}\t\t\n\t\t\n\t\treturn histogram;\n\t}\n\t\n\tpublic static int computeHistogramVolume(int[] histogram) {\n\t\tint start = 0;\n\t\tint end = histogram.length - 1;\n\t\t\n\t\tHistogramData[] data = createHistogramData(histogram);\n\t\t\n\t\tint max = data[0].getRightMaxIndex();\n\t\t\n\t\tint leftVolume =  subgraphVolume(data, start, max, true);\n\t\tint rightVolume = subgraphVolume(data, max, end, false);\n\t\t\n\t\treturn leftVolume + rightVolume;\t\t\n\t}\n\t\n\tpublic static void main(String[] args) {\n\t\tint[] histogram = {0, 0, 4, 0, 0, 6, 0, 0, 3, 0, 8, 0, 2, 0, 5, 2, 0, 3, 0, 0};\n\t\tint result = computeHistogramVolume(histogram);\n\t\tSystem.out.println(result);\n\t}\n\n}\n","Chapter":"Ch 17. Hard"}