{"Id":"b688c8aa-8f67-4406-8df5-45889a8e4082","Topic":"Ch 17. Hard","Question":"","Solution":"package Q17_12_BiNode;\r\n\r\npublic class QuestionB {\r\n\tstatic int count = 0;\r\n\tpublic static BiNode convert(BiNode root) {\r\n\t\tif (root == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tBiNode part1 = convert(root.node1);\r\n\t\tBiNode part2 = convert(root.node2);\r\n\t\t\r\n\t\tif (part1 != null) {\r\n\t\t\tconcat(getTail(part1), root);\r\n\t\t}\r\n\t\t\r\n\t\tif (part2 != null) {\r\n\t\t\tconcat(root, part2);\r\n\t\t}\r\n\t\t\r\n\t\treturn part1 == null ? root : part1;\r\n\t}\t\r\n\t\r\n\tpublic static BiNode getTail(BiNode node) {\r\n\t\tif (node == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\twhile (node.node2 != null) {\r\n\t\t\tcount++;\r\n\t\t\tnode = node.node2;\r\n\t\t}\r\n\t\treturn node;\r\n\t}\r\n\t\r\n\tpublic static void concat(BiNode x, BiNode y) {\r\n\t\tx.node2 = y;\r\n\t\ty.node1 = x;\r\n\t}\r\n\r\n\tpublic static void printLinkedListTree(BiNode root) {\r\n\t\tfor (BiNode node = root; node != null; node = node.node2) {\r\n\t\t\tif (node.node2 != null && node.node2.node1 != node) {\r\n\t\t\t\tSystem.out.print(\"inconsistent node: \" + node);\r\n\t\t\t}\r\n\t\t\tSystem.out.print(node.data + \"->\");\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t}\r\n\r\n\tpublic static BiNode createTree() {\r\n\t\tBiNode[] nodes = new BiNode[7];\r\n\t\tfor (int i = 0; i < nodes.length; i++) {\r\n\t\t\tnodes[i] = new BiNode(i);\r\n\t\t}\r\n\t\tnodes[4].node1 = nodes[2];\r\n\t\tnodes[4].node2 = nodes[5];\r\n\t\tnodes[2].node1 = nodes[1];\r\n\t\tnodes[2].node2 = nodes[3];\r\n\t\tnodes[5].node2 = nodes[6];\r\n\t\tnodes[1].node1 = nodes[0];\r\n\t\treturn nodes[4];\r\n\t}\r\n\r\n\tpublic static void printAsTree(BiNode root, String spaces) {\r\n\t\tif (root == null) {\r\n\t\t\tSystem.out.println(spaces + \"- null\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tSystem.out.println(spaces + \"- \" + root.data);\r\n\t\tprintAsTree(root.node1, spaces + \"   \");\r\n\t\tprintAsTree(root.node2, spaces + \"   \");\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tBiNode root = createTree();\r\n\t\tprintAsTree(root, \"\");\r\n\t\tBiNode n = convert(root);\r\n\t\tprintLinkedListTree(n);\r\n\t\tSystem.out.println(count);\r\n\t}\r\n\r\n}\r\n","Chapter":"Ch 17. Hard"}